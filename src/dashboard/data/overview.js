export const mockUniqueSKUs = {"data":[{"date":"2025-02-12","skus":55},{"date":"2025-02-13","skus":59},{"date":"2025-02-14","skus":55},{"date":"2025-02-15","skus":67},{"date":"2025-02-16","skus":57},{"date":"2025-02-17","skus":59},{"date":"2025-02-18","skus":65},{"date":"2025-02-19","skus":61},{"date":"2025-02-20","skus":61},{"date":"2025-02-21","skus":51},{"date":"2025-02-22","skus":61},{"date":"2025-02-23","skus":61},{"date":"2025-02-24","skus":59},{"date":"2025-02-25","skus":57},{"date":"2025-02-26","skus":59},{"date":"2025-02-27","skus":59},{"date":"2025-02-28","skus":55},{"date":"2025-03-01","skus":57},{"date":"2025-03-02","skus":55},{"date":"2025-03-03","skus":53},{"date":"2025-03-04","skus":59},{"date":"2025-03-05","skus":59},{"date":"2025-03-06","skus":51},{"date":"2025-03-07","skus":57},{"date":"2025-03-08","skus":61},{"date":"2025-03-09","skus":53},{"date":"2025-03-10","skus":49},{"date":"2025-03-11","skus":57},{"date":"2025-03-12","skus":57},{"date":"2025-03-13","skus":57}]}
export const mockQuantities = {"data":[{"date":"2025-02-12","stockItemQuantity":87,"menuItemQuantity":340},{"date":"2025-02-13","stockItemQuantity":96,"menuItemQuantity":318},{"date":"2025-02-14","stockItemQuantity":98,"menuItemQuantity":255},{"date":"2025-02-15","stockItemQuantity":103,"menuItemQuantity":267},{"date":"2025-02-16","stockItemQuantity":104,"menuItemQuantity":235},{"date":"2025-02-17","stockItemQuantity":105,"menuItemQuantity":283},{"date":"2025-02-18","stockItemQuantity":120,"menuItemQuantity":324},{"date":"2025-02-19","stockItemQuantity":119,"menuItemQuantity":276},{"date":"2025-02-20","stockItemQuantity":108,"menuItemQuantity":243},{"date":"2025-02-21","stockItemQuantity":93,"menuItemQuantity":340},{"date":"2025-02-22","stockItemQuantity":98,"menuItemQuantity":304},{"date":"2025-02-23","stockItemQuantity":110,"menuItemQuantity":259},{"date":"2025-02-24","stockItemQuantity":95,"menuItemQuantity":249},{"date":"2025-02-25","stockItemQuantity":97,"menuItemQuantity":300},{"date":"2025-02-26","stockItemQuantity":104,"menuItemQuantity":278},{"date":"2025-02-27","stockItemQuantity":118,"menuItemQuantity":306},{"date":"2025-02-28","stockItemQuantity":88,"menuItemQuantity":283},{"date":"2025-03-01","stockItemQuantity":102,"menuItemQuantity":229},{"date":"2025-03-02","stockItemQuantity":74,"menuItemQuantity":291},{"date":"2025-03-03","stockItemQuantity":105,"menuItemQuantity":294},{"date":"2025-03-04","stockItemQuantity":83,"menuItemQuantity":264},{"date":"2025-03-05","stockItemQuantity":113,"menuItemQuantity":321},{"date":"2025-03-06","stockItemQuantity":84,"menuItemQuantity":267},{"date":"2025-03-07","stockItemQuantity":92,"menuItemQuantity":290},{"date":"2025-03-08","stockItemQuantity":112,"menuItemQuantity":323},{"date":"2025-03-09","stockItemQuantity":106,"menuItemQuantity":265},{"date":"2025-03-10","stockItemQuantity":78,"menuItemQuantity":291},{"date":"2025-03-11","stockItemQuantity":81,"menuItemQuantity":314},{"date":"2025-03-12","stockItemQuantity":100,"menuItemQuantity":319},{"date":"2025-03-13","stockItemQuantity":93,"menuItemQuantity":325}]}
export const mockRevenue = {"menuRevenue":484089,"stockRevenue":350854}
export const mockCost = {"data":[{"date":"2025-02-12","totalCost":18945},{"date":"2025-02-13","totalCost":22933.2},{"date":"2025-02-14","totalCost":18497.1},{"date":"2025-02-15","totalCost":14943.9},{"date":"2025-02-16","totalCost":20897.1},{"date":"2025-02-17","totalCost":15502.2},{"date":"2025-02-18","totalCost":22009.8},{"date":"2025-02-19","totalCost":16556.1},{"date":"2025-02-20","totalCost":15486.3},{"date":"2025-02-21","totalCost":16276.2},{"date":"2025-02-22","totalCost":15624.9},{"date":"2025-02-23","totalCost":17736.9},{"date":"2025-02-24","totalCost":15205.5},{"date":"2025-02-25","totalCost":15177.6},{"date":"2025-02-26","totalCost":15396.6},{"date":"2025-02-27","totalCost":16107},{"date":"2025-02-28","totalCost":18431.7},{"date":"2025-03-01","totalCost":17078.1},{"date":"2025-03-02","totalCost":18775.2},{"date":"2025-03-03","totalCost":15543.6},{"date":"2025-03-04","totalCost":18831},{"date":"2025-03-05","totalCost":15306},{"date":"2025-03-06","totalCost":23556.6},{"date":"2025-03-07","totalCost":18843.9},{"date":"2025-03-08","totalCost":16270.8},{"date":"2025-03-09","totalCost":16799.1},{"date":"2025-03-10","totalCost":18020.4},{"date":"2025-03-11","totalCost":18452.7},{"date":"2025-03-12","totalCost":19211.4},{"date":"2025-03-13","totalCost":18092.1}]}
export const mockRevenueList = {"data":[{"date":"2025-02-12","totalRevenue":26618},{"date":"2025-02-13","totalRevenue":23527},{"date":"2025-02-14","totalRevenue":29551},{"date":"2025-02-15","totalRevenue":25230},{"date":"2025-02-16","totalRevenue":26945},{"date":"2025-02-17","totalRevenue":30895},{"date":"2025-02-18","totalRevenue":24918},{"date":"2025-02-19","totalRevenue":26558},{"date":"2025-02-20","totalRevenue":29645},{"date":"2025-02-21","totalRevenue":33479},{"date":"2025-02-22","totalRevenue":29700},{"date":"2025-02-23","totalRevenue":28006},{"date":"2025-02-24","totalRevenue":28769},{"date":"2025-02-25","totalRevenue":24645},{"date":"2025-02-26","totalRevenue":31651},{"date":"2025-02-27","totalRevenue":29353},{"date":"2025-02-28","totalRevenue":26749},{"date":"2025-03-01","totalRevenue":29122},{"date":"2025-03-02","totalRevenue":29319},{"date":"2025-03-03","totalRevenue":31235},{"date":"2025-03-04","totalRevenue":27368},{"date":"2025-03-05","totalRevenue":29696},{"date":"2025-03-06","totalRevenue":25806},{"date":"2025-03-07","totalRevenue":26691},{"date":"2025-03-08","totalRevenue":26615},{"date":"2025-03-09","totalRevenue":25057},{"date":"2025-03-10","totalRevenue":25781},{"date":"2025-03-11","totalRevenue":24554},{"date":"2025-03-12","totalRevenue":30715},{"date":"2025-03-13","totalRevenue":26745}]}
export const mockBestSelling = {"data":[{"menuId":"CD2","name":"Iced Chocolate","category":"CHOCOLATE_DRINKS","price":65,"popularityScore":27.23771700164089,"totalQuantitySold":464,"conversion":{"data":[10,12,26,24,15,21,18,10,8,12,0,23,28,26,19,11,4,26,22,12,17,17,26,22,14,19,17,5,0,0]}},{"menuId":"S7","name":"Avocado Smoothie","category":"SMOOTHIES","price":92,"popularityScore":27.97748109290954,"totalQuantitySold":434,"conversion":{"data":[7,18,21,17,20,10,21,10,16,20,0,12,22,22,12,20,7,22,1,24,27,12,24,19,8,10,14,18,0,0]}},{"menuId":"MS1","name":"Classic Milkshake","category":"MILKSHAKES","price":70,"popularityScore":26.75164181726491,"totalQuantitySold":390,"conversion":{"data":[9,1,3,16,23,24,25,10,23,12,16,0,28,27,16,11,0,25,8,26,15,16,10,22,1,7,0,16,0,0]}},{"menuId":"CF5","name":"Macchiato","category":"COFFEE","price":58,"popularityScore":29.24445025436577,"totalQuantitySold":382,"conversion":{"data":[11,13,5,14,8,5,24,11,15,6,16,13,34,7,8,9,16,12,8,0,20,28,25,28,10,5,21,10,0,0]}},{"menuId":"T1","name":"Black Tea","category":"TEA","price":40,"popularityScore":26.8957958454507,"totalQuantitySold":374,"conversion":{"data":[5,10,19,12,14,8,25,16,13,23,2,11,33,4,16,0,23,22,22,2,23,1,0,11,16,3,20,20,0,0]}}]}
export const mockWorstSelling = {"data":[{"menuId":"CO3","name":"Macarons","category":"COOKIES","price":50,"popularityScore":0.9616873353897981,"totalQuantitySold":0,"conversion":{"data":[0,0,0,1,0,2,0,1,0,0,0,1,2,0,0,1,0,2,0,1,0,0,2,1,0,0,0,0,0,0]}},{"menuId":"TR2","name":"Ã‰clairs","category":"TARTS","price":65,"popularityScore":0.869719182970794,"totalQuantitySold":0,"conversion":{"data":[0,1,0,0,2,1,0,1,0,0,0,1,2,1,0,1,0,2,1,0,0,0,1,2,0,0,0,0,0,0]}},{"menuId":"CF1","name":"Espresso","category":"COFFEE","price":50,"popularityScore":1.93192601493396,"totalQuantitySold":13,"conversion":{"data":[1,2,1,2,0,1,1,0,2,1,0,1,2,1,1,0,2,0,1,2,1,0,1,2,1,1,0,2,0,0]}},{"menuId":"J7","name":"Beet Juice","category":"JUICE","price":75,"popularityScore":2.355177480505593,"totalQuantitySold":20,"conversion":{"data":[2,1,0,1,2,0,1,2,1,0,0,1,2,1,1,2,0,1,0,2,1,2,0,1,0,2,1,1,0,0]}},{"menuId":"TR1","name":"Tarts","category":"TARTS","price":60,"popularityScore":2.284899351699348,"totalQuantitySold":26,"conversion":{"data":[0,1,2,0,1,2,0,1,0,1,2,0,1,2,1,0,1,0,2,1,1,0,1,2,0,2,1,0,0,0]}}]};
export const mockLastMonth = {"data":{"cost":555457.5,"revenue":859569,"quantity":11390,"profit":304111.5}}
export const insights = {"sku":"The number of SKUs fluctuates, with peaks on February 15 and February 18, indicating potential restocking or product launches on those dates.","quantity":"Stock and menu item quantities are generally stable, with noticeable dips in stock items around February 28 and March 10, which could indicate higher sales or stock depletion.","revenue":"The total revenue is split between menu and stock, with the menu revenue contributing a significant portion of the total revenue.","cost":"Total costs fluctuate daily, with notable peaks around February 13 and March 6, suggesting increased operational or procurement costs on those dates.", "profit":"The total profit for the period shows a positive trend, with steady revenue growth across various dates, indicating a healthy financial performance. However, the cost variations suggest that controlling expenses might be crucial to maintaining profitability in the long term."}

export let sacrificeItem;
export let sacrificeItemIndex;
function generateSacrificeItem() {
    const randomIndex = Math.floor(Math.random() * menuItems.length);
    sacrificeItemIndex = randomIndex;
    sacrificeItem = stockItems[randomIndex];
}
export function generateMockSKUData(date) {
    const result = [];
    const startDate = new Date(date);
    startDate.setDate(startDate.getDate() - 29);
    
    for (let i = 0; i < 30; i++) {
        const currentDate = new Date(startDate);
        currentDate.setDate(startDate.getDate() + i);
        
        result.push({
            date: currentDate.toISOString().split('T')[0], // Format YYYY-MM-DD
            skus: Math.floor(Math.random() * (70 - 50 + 1)) + 50 // Random SKU count between 50 and 70
        });
    }
    
    return result;
}

export function generateMockQuantityData(date) {
    const result = [];
    const startDate = new Date(date);
    startDate.setDate(startDate.getDate() - 29);
    
    for (let i = 0; i < 30; i++) {
        const currentDate = new Date(startDate);
        currentDate.setDate(startDate.getDate() + i);
        
        result.push({
            date: currentDate.toISOString().split('T')[0], // Format YYYY-MM-DD
            stockItemQuantity: Math.floor(Math.random() * (120 - 80 + 1)) + 80, // Random stock quantity between 80 and 120
            menuItemQuantity: Math.floor(Math.random() * (350 - 200 + 1)) + 200 // Random menu item quantity between 200 and 350
        });
    }
    
    return result;
}

export function generateMockRevenueData(date) {
    return {menuRevenue: Math.floor(Math.random() * (500000 - 400000 + 1)) + 400000, stockRevenue: Math.floor(Math.random() * (400000 - 300000 + 1)) + 300000};
}

export function generateMockCostData(date) {
    const result = [];
    const startDate = new Date(date);
    startDate.setDate(startDate.getDate() - 29);
    
    for (let i = 0; i < 30; i++) {
        const currentDate = new Date(startDate);
        currentDate.setDate(startDate.getDate() + i);
        
        result.push({
            date: currentDate.toISOString().split('T')[0], // Format YYYY-MM-DD
            totalCost: Math.floor(Math.random() * (25000 - 15000 + 1)) + 15000 // Random cost between 15000 and 25000
        });
    }
    
    return result;
}

export function generateMockRevenueList(date) {
    const result = [];
    const startDate = new Date(date);
    startDate.setDate(startDate.getDate() - 29);
    
    for (let i = 0; i < 30; i++) {
        const currentDate = new Date(startDate);
        currentDate.setDate(startDate.getDate() + i);
        
        result.push({
            date: currentDate.toISOString().split('T')[0], // Format YYYY-MM-DD
            totalRevenue: Math.floor(Math.random() * (35000 - 25000 + 1)) + 25000 // Random revenue between 25000 and 35000
        });
    }
    
    return result;
}

export function generateMockBestSelling(date) {
    let selectedIndexes = new Set();  // A set to store selected indexes
    const result = [];

    for (let i = 0; i < 5; i++) {
        let randomIndex;
        // Ensure the random index is unique
        do {
            randomIndex = Math.floor(Math.random() * menuItems.length);
        } while (selectedIndexes.has(randomIndex));  // Check if the index has already been selected

        selectedIndexes.add(randomIndex);  // Add the index to the set to track it

        const item = menuItems[randomIndex];
        const quantity = Math.floor(Math.random() * (500 - 300 + 1)) + 300; // Random quantity sold between 300 and 500
        result.push({
            menuId: item.menuId,
            name: item.name,
            category: item.category,
            price: item.price,
            popularityScore: Math.random() * 30, // Random popularity score
            totalQuantitySold: quantity, 
            conversion: generateBestMockConversionData(30, quantity)
        });
    }
    
    // Sort the result array by totalQuantitySold in descending order
    result.sort((a, b) => b.totalQuantitySold - a.totalQuantitySold);

    return result;
}

export function generateMockWorstSelling(date) {
    let selectedIndexes = new Set();  // A set to store selected indexes
    generateSacrificeItem();
    selectedIndexes.add(sacrificeItemIndex);  // Add the index to the set to track it

    const result = [];    

    for (let i = 0; i < 5; i++) {
        let item;
        let quantity;

        if (i === 0) {
            item = sacrificeItem;
            quantity = 0;
        } else {
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * menuItems.length);
            } while (selectedIndexes.has(randomIndex));  // Check if the index has already been selected
    
            selectedIndexes.add(randomIndex);  // Add the index to the set to track it

            item = stockItems[randomIndex];
            quantity = Math.floor(Math.random() * 15) + 1; // Random quantity sold between 1 and 30
        }
        
        result.push({
            menuId: item.sku,
            name: item.name,
            category: item.category,
            price: item.sellingPrice,
            popularityScore: Math.random() * 3, // Random popularity score
            totalQuantitySold: quantity,    
            conversion: generateWorstMockConversionData(30, quantity)
        });
    }

    // Sort the result array by totalQuantitySold in ascending order
    result.sort((a, b) => a.totalQuantitySold - b.totalQuantitySold);
    
    return result;
}

function generateBestMockConversionData(length, total) {
    let numbers = new Array(length).fill(Math.floor(total / length));
    let remaining = total - numbers.reduce((a, b) => a + b, 0);
    
    while (remaining > 0) {
        for (let i = 0; i < length && remaining > 0; i++) {
            let randIndex = Math.floor(Math.random() * length);
            numbers[randIndex]++;
            remaining--;
        }
    }
    
    // Introduce more fluctuation by making adjustments proportional to total
    let maxAdjustment = Math.max(1, Math.floor(total / length / 2)); // Scale adjustment based on total
    
    for (let i = 0; i < length; i++) {
        let adjustment = Math.floor(Math.random() * (2 * maxAdjustment + 1)) - maxAdjustment; // Range: -maxAdjustment to +maxAdjustment
        if (numbers[i] + adjustment > 0) {
            numbers[i] += adjustment;
        }
    }
    
    return {data:numbers};
}

function generateWorstMockConversionData(length, total) {
    let numbers = new Array(length).fill(0); // Initialize all numbers as 0
    let remaining = total;
    
    // Distribute the total across the array
    while (remaining > 0) {
        let randIndex = Math.floor(Math.random() * length);
        numbers[randIndex]++;
        remaining--;
    }

    // Allow for slight fluctuation in the distribution
    let maxAdjustment = Math.max(1, Math.floor(total / length)); // Adjust the fluctuation based on the total size

    for (let i = 0; i < length; i++) {
        let adjustment = Math.floor(Math.random() * (2 * maxAdjustment + 1)) - maxAdjustment; // Range: -maxAdjustment to +maxAdjustment
        if (numbers[i] + adjustment >= 0) {
            numbers[i] += adjustment;
        }
    }

    // Ensure the sum of numbers equals the total
    let currentSum = numbers.reduce((a, b) => a + b, 0);
    let difference = total - currentSum;

    // Adjust remaining values if the sum doesn't match the total
    while (difference !== 0) {
        let randIndex = Math.floor(Math.random() * length); // Pick a random index
        if (difference > 0) {
            numbers[randIndex]++;
            difference--;
        } else if (difference < 0 && numbers[randIndex] > 0) {
            numbers[randIndex]--;
            difference++;
        }
    }

    return {data: numbers};
}

export function generateMockLastMonthData(date) {
    const cost = Math.floor(Math.random() * (650000 - 550000 + 1)) + 550000; // Random cost between 550000 and 650000
    const revenue = Math.floor(Math.random() * (900000 - 700000 + 1)) + 700000; // Random revenue between 700000 and 900000
    return {
        cost: cost,
        revenue: revenue, 
        quantity: Math.floor(Math.random() * (12000 - 10000 + 1)) + 10000, // Random quantity between 10000 and 12000
        profit: revenue - cost
    };
}

export const menuItems = [
    // Coffee
    { menuId: 'CF1', name: 'Espresso', category: 'Coffee', price: 50 },
    { menuId: 'CF2', name: 'Latte', category: 'Coffee', price: 60 },
    { menuId: 'CF3', name: 'Cappuccino', category: 'Coffee', price: 65 },
    { menuId: 'CF4', name: 'Americano', category: 'Coffee', price: 55 },
    { menuId: 'CF5', name: 'Macchiato', category: 'Coffee', price: 58 },
    { menuId: 'CF6', name: 'Mocha', category: 'Coffee', price: 70 },

    // Tea
    { menuId: 'T1', name: 'Black Tea', category: 'Tea', price: 40 },
    { menuId: 'T2', name: 'Green Tea', category: 'Tea', price: 45 },
    { menuId: 'T3', name: 'Herbal Tea', category: 'Tea', price: 50 },
    { menuId: 'T4', name: 'Chai Tea', category: 'Tea', price: 55 },
    { menuId: 'T5', name: 'Matcha Tea', category: 'Tea', price: 65 },
    { menuId: 'T6', name: 'Thai Iced Tea', category: 'Tea', price: 50 },

    // Smoothies
    { menuId: 'S1', name: 'Fruit Smoothie', category: 'Smoothies', price: 80 },
    { menuId: 'S2', name: 'Protein Shake', category: 'Smoothies', price: 90 },
    { menuId: 'S3', name: 'Mango Smoothie', category: 'Smoothies', price: 85 },
    { menuId: 'S4', name: 'Strawberry Banana Smoothie', category: 'Smoothies', price: 82 },
    { menuId: 'S5', name: 'Green Detox Smoothie', category: 'Smoothies', price: 95 },
    { menuId: 'S6', name: 'Coconut Pineapple Smoothie', category: 'Smoothies', price: 88 },
    { menuId: 'S7', name: 'Avocado Smoothie', category: 'Smoothies', price: 92 },

    // Milkshakes
    { menuId: 'MS1', name: 'Classic Milkshake', category: 'Milkshakes', price: 70 },
    { menuId: 'MS2', name: 'Chocolate Milkshake', category: 'Milkshakes', price: 80 },
    { menuId: 'MS3', name: 'Vanilla Milkshake', category: 'Milkshakes', price: 75 },
    { menuId: 'MS4', name: 'Special Milkshake', category: 'Milkshakes', price: 85 },

    // Juices
    { menuId: 'J1', name: 'Orange Juice', category: 'Juice', price: 60 },
    { menuId: 'J2', name: 'Lemonade', category: 'Juice', price: 50 },
    { menuId: 'J3', name: 'Apple Juice', category: 'Juice', price: 55 },
    { menuId: 'J4', name: 'Watermelon Juice', category: 'Juice', price: 65 },
    { menuId: 'J5', name: 'Pineapple Juice', category: 'Juice', price: 62 },
    { menuId: 'J6', name: 'Carrot Juice', category: 'Juice', price: 70 },
    { menuId: 'J7', name: 'Beet Juice', category: 'Juice', price: 75 },

    // Chocolate Drinks
    { menuId: 'CD1', name: 'Hot Chocolate', category: 'Chocolate Drinks', price: 60 },
    { menuId: 'CD2', name: 'Iced Chocolate', category: 'Chocolate Drinks', price: 65 },

    // Pastries
    { menuId: 'P1', name: 'Croissant', category: 'Pastries', price: 40 },
    { menuId: 'P2', name: 'Muffin', category: 'Pastries', price: 45 },

    // Cakes
    { menuId: 'CK1', name: 'Cheesecake', category: 'Cakes', price: 90 },
    { menuId: 'CK2', name: 'Chocolate Cake', category: 'Cakes', price: 80 },
    { menuId: 'CK3', name: 'Tiramisu', category: 'Cakes', price: 80 },

    // Cookies
    { menuId: 'CO1', name: 'Cookies', category: 'Cookies', price: 35 },
    { menuId: 'CO2', name: 'Brownies', category: 'Cookies', price: 40 },
    { menuId: 'CO3', name: 'Macarons', category: 'Cookies', price: 50 },

    // Tarts
    { menuId: 'TR1', name: 'Tarts', category: 'Tarts', price: 60 },
    { menuId: 'TR2', name: 'Ã‰clairs', category: 'Tarts', price: 65 },
    { menuId: 'TR3', name: 'Cream Puffs', category: 'Tarts', price: 50 }
]

export const stockItems = [
    { sku: 'SB1', name: 'Coffee Beans', category: 'COFFEE', sellingPrice: 500 },
    { sku: 'SB2', name: 'Espresso Shots', category: 'COFFEE', sellingPrice: 20 },
  
    { sku: 'SB4', name: 'Loose-leaf Tea', category: 'TEA', sellingPrice: 400 },
    { sku: 'SB5', name: 'Tea Bags', category: 'TEA', sellingPrice: 20 },
    { sku: 'SB6', name: 'Matcha Powder', category: 'TEA', sellingPrice: 650 },
    { sku: 'SB7', name: 'Thai Tea Mix', category: 'TEA', sellingPrice: 280 },
  
    { sku: 'SB8', name: 'Milk', category: 'DAIRY', sellingPrice: 70 },
    { sku: 'SB9', name: 'Cream', category: 'DAIRY', sellingPrice: 100 },
    { sku: 'SB10', name: 'Butter', category: 'DAIRY', sellingPrice: 150 },
  
    { sku: 'SB11', name: 'Sugar', category: 'SWEETENER', sellingPrice: 50 },
    { sku: 'SB12', name: 'Honey', category: 'SWEETENER', sellingPrice: 200 },
    { sku: 'SB13', name: 'Vanilla Syrup', category: 'SWEETENER', sellingPrice: 130 },
  
    { sku: 'SB14', name: 'Cocoa Powder', category: 'FLAVORING', sellingPrice: 260 },
    { sku: 'SB15', name: 'Caramel Syrup', category: 'FLAVORING', sellingPrice: 165 },
    { sku: 'SB16', name: 'Cinnamon', category: 'FLAVORING', sellingPrice: 85 },
  
    { sku: 'SB17', name: 'Strawberries', category: 'FRUIT', sellingPrice: 100 },
    { sku: 'SB18', name: 'Bananas', category: 'FRUIT', sellingPrice: 35 },
    { sku: 'SB19', name: 'Lemons', category: 'FRUIT', sellingPrice: 70 },
    { sku: 'SB20', name: 'Mangoes', category: 'FRUIT', sellingPrice: 135 },
    { sku: 'SB21', name: 'Pineapples', category: 'FRUIT', sellingPrice: 120 },
    { sku: 'SB22', name: 'Avocados', category: 'FRUIT', sellingPrice: 170 },
    { sku: 'SB23', name: 'Watermelons', category: 'FRUIT', sellingPrice: 100 },
    { sku: 'SB24', name: 'Apples', category: 'FRUIT', sellingPrice: 100 },
    { sku: 'SB25', name: 'Carrots', category: 'FRUIT', sellingPrice: 85 },
    { sku: 'SB26', name: 'Beets', category: 'FRUIT', sellingPrice: 120 },
  
    { sku: 'SB27', name: 'Almonds', category: 'NUTS', sellingPrice: 170 },
    { sku: 'SB28', name: 'Walnuts', category: 'NUTS', sellingPrice: 200 },
    { sku: 'SB29', name: 'Pistachios', category: 'NUTS', sellingPrice: 230 },
  
    { sku: 'SB30', name: 'Flour', category: 'GRAIN', sellingPrice: 100 },
    { sku: 'SB31', name: 'Baking Powder', category: 'GRAIN', sellingPrice: 70 },
    { sku: 'SB32', name: 'Yeast', category: 'GRAIN', sellingPrice: 130 },
  
    { sku: 'SB33', name: 'Dark Chocolate', category: 'CHOCOLATE', sellingPrice: 170 },
    { sku: 'SB34', name: 'Milk Chocolate', category: 'CHOCOLATE', sellingPrice: 135 },
    { sku: 'SB35', name: 'White Chocolate', category: 'CHOCOLATE', sellingPrice: 200 },
  
    { sku: 'SB36', name: 'Orange Juice', category: 'JUICE', sellingPrice: 130 },
    { sku: 'SB37', name: 'Apple Juice', category: 'JUICE', sellingPrice: 120 },
  
    { sku: 'SB38', name: 'Ice Cubes', category: 'ICE', sellingPrice: 20 },
    { sku: 'SB39', name: 'Crushed Ice', category: 'ICE', sellingPrice: 30 },
  
    { sku: 'SB40', name: 'Cups', category: 'PACKAGING', sellingPrice: 4 },
    { sku: 'SB41', name: 'Lids', category: 'PACKAGING', sellingPrice: 2 },
    { sku: 'SB42', name: 'Straws', category: 'PACKAGING', sellingPrice: 1 },
    { sku: 'SB43', name: 'Takeaway Boxes', category: 'PACKAGING', sellingPrice: 5 }
  ]
  

export function generateMockKPIInsights(data, interval, value, trend) {
    return {
        sku: generateSKUInsights(data, interval, value, trend),
        cost: generateCostInsights(data, interval, value, trend),
        profit: generateProfitInsights(data, interval, value, trend)
    };
}

function findMinMax(arr) {
    if (arr.length === 0) return null; // Handle empty array case

    let minValue = Math.min(...arr);
    let minIndex = arr.indexOf(minValue);

    let maxValue = Math.max(...arr);
    let maxIndex = arr.indexOf(maxValue);

    return { min: { value: minValue, index: minIndex }, max: { value: maxValue, index: maxIndex } };
}

function extractKPIData(data, interval, value, trend){
    const minMax = findMinMax(data);
    const minValue = minMax.min.value;
    const minDate = interval[minMax.min.index];
    const maxValue = minMax.max.value;
    const maxDate = interval[minMax.max.index];
    const avg = value / 30;
    const trendText = trend > 0 ? 'increased' : 'decreased';
    const trendAbs = Math.abs(trend);

    return {minValue, minDate, maxValue, maxDate, avg, trendText, trendAbs};
}

function generateSKUInsights(data, interval, value, trend){
    const {minValue, minDate, maxValue, maxDate, avg, trendText, trendAbs} = extractKPIData(data, interval, value, trend);

    return `The number of SKUs fluctuates between ${minValue} and ${maxValue}, with the lowest count on ${minDate} and the highest count on ${maxDate}. The average number of SKUs is ${avg.toFixed(2)} per day, and total number of unique SKUs sold during the month has remained stable with ${value} SKUs, which indicates a consistent product offering. However, total SKUs in the inventory is 87 and only 86 SKUS were sold each month because ${sacrificeItem.name} was not sold a single time. Consider removing them from the menu or investigating why they aren't selling.`;
}

function generateCostInsights(data, interval, value, trend){
    const {minValue, minDate, maxValue, maxDate, avg, trendText, trendAbs} = extractKPIData(data, interval, value, trend);

    return `Total costs fluctuate between $${minValue} and $${maxValue}, with the lowest cost on ${minDate} and the highest cost on ${maxDate}. The average daily cost is $${avg.toFixed(2)}. Over the past month, the total cost has ${trendText} by ${trendAbs.toFixed(2)}%.`;
}

function generateProfitInsights(data, interval, value, trend){
    const {minValue, minDate, maxValue, maxDate, avg, trendText, trendAbs} = extractKPIData(data, interval, value, trend);

    return `Total profit fluctuates between $${minValue} and $${maxValue}, with the lowest profit on ${minDate} and the highest profit on ${maxDate}. The average daily profit is $${avg.toFixed(2)}. Over the past month, the total profit has ${trendText} by ${trendAbs.toFixed(2)}%.`;
}

export function generateMockQuantityInsights(series, interval, value, trend){
    const menuMinMax = findMinMax(series[0].data);
    const stockMinMax = findMinMax(series[1].data);

    const menuMinValue = menuMinMax.min.value;
    const menuMinDate = interval[menuMinMax.min.index];
    const menuMaxValue = menuMinMax.max.value;
    const menuMaxDate = interval[menuMinMax.max.index];

    const stockMinValue = stockMinMax.min.value;
    const stockMinDate = interval[stockMinMax.min.index];
    const stockMaxValue = stockMinMax.max.value;
    const stockMaxDate = interval[stockMinMax.max.index];

    const avg = value / 30;
    const trendText = trend > 0 ? 'an upward' : 'a downward';
    const trendAbs = Math.abs(trend);

    return `Menu items sold were twice as many as stock items, indicating a stronger customer preference for menu items. Stock and menu item quantities fluctuate daily, with the lowest stock quantity of ${stockMinValue} on ${stockMinDate} and the highest stock quantity of ${stockMaxValue} on ${stockMaxDate}. The lowest menu item quantity of ${menuMinValue} was recorded on ${menuMinDate}, while the highest menu item quantity of ${menuMaxValue} was observed on ${menuMaxDate}. The average daily stock and menu item quantity is ${avg.toFixed(2)} and the total stock and menu item quantities for the month is ${value}. Compared to last month, the combined total changed by ${trendAbs}%, indicating ${trendText} trend in overall sale quantities.`;
}

export function generateMockRevenueInsights(series, value, trend){
    const stockRevenue = series[0].data[0];
    const menuRevenue = series[0].data[1];
    const trendText1 = trend > 0 ? 'increased' : 'decreased';
    const trendText2 = trend > 0 ? 'an upward' : 'a downward';
    const trendAbs = Math.abs(trend);

    return `The total revenue is split between menu and stock, with the menu revenue contributing a significant portion of the total revenue. The menu revenue accounts for $${menuRevenue} and the stock revenue accounts for $${stockRevenue}. The total revenue for the month is $${value}. Compared to last month, the total revenue has ${trendText1} by ${trendAbs}%, indicating ${trendText2} trend in overall revenue.`;
}

export function generateMockBestSellingInsights(data){    
    return `The top 5 best-selling items include ${data[0].itemName}, ${data[1].itemName}, ${data[2].itemName}, ${data[3].itemName} and ${data[4].itemName} each with significant contributions to total sales and revenue. The best-selling item, ${data[0].itemName}, generated the highest revenue of $${data[0].revenue}, closely followed by ${data[1].itemName} with $${data[1].revenue}, indicating that sales volume directly correlates to overall revenue.`
}

export function generateMockWorstSellingInsights(data) {
    return `The bottom 5 worst-selling items include ${data[0].itemName}, ${data[1].itemName}, ${data[2].itemName}, ${data[3].itemName}, and ${data[4].itemName}, each showing low sales and revenue. The least-selling item, ${data[0].itemName}, generated the lowest revenue of $${data[0].revenue}, followed by ${data[1].itemName} with only $${data[1].revenue}, highlighting the poor performance and low customer demand for these items. These items may need reassessment for pricing, promotion, or reconsideration for discontinuation.`
}

